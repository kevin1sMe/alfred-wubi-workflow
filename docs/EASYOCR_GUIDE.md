# EasyOCR 模型指南

本文档介绍了本项目中作为"主力高精度模型"使用的通用 OCR 方案：**EasyOCR**。

## 1. 原理说明

[EasyOCR](https://github.com/JaidedAI/EasyOCR) 是一个流行的 Python OCR 库，它集成了深度学习技术：
*   **检测 (Detection)**：使用 CRAFT 算法定位文本位置。
*   **识别 (Recognition)**：使用 ResNet（提取特征）+ LSTM（序列建模）+ CTC Loss 进行文字识别。

它是一个端到端的解决方案，经过大量数据的预训练，具有很强的通用性。

## 2. 优缺点分析

| 特点 | 说明 |
| :--- | :--- |
| **优点** | 1. **通用性强**：无需针对特定字体训练，对扭曲、噪点有很好的鲁棒性。<br>2. **高准确率**：在我们的测试集中达到了 **75%** 的准确率，表现最稳定。<br>3. **易于集成**：开箱即用，API 简单。 |
| **缺点** | 1. **资源占用大**：需要加载几百 MB 的模型文件，内存占用高。<br>2. **速度慢**：在无 GPU 加速的情况下，单张图片推理可能需要几百毫秒。<br>3. **过度纠错**：有时会不仅识别数字，还会把噪点误认为标点符号（需设置 allowlist）。 |

## 3. 在本项目中的应用

### 3.1 核心代码
集成在 `dual_verify.py`、`auto_label.py` 和 `batch_label.py` 中。

关键调用：
```python
reader = easyocr.Reader(['en'], gpu=False)
result = reader.readtext(image_path, allowlist='0123456789')
```
*   `allowlist='0123456789'`：强制限制输出字符集，大幅减少了识别出乱码的概率。

### 3.2 预处理技巧
为了适应我们极小的验证码图片，我们在 `preprocess_for_easyocr` 函数中做了特殊处理：
*   **放大 (Upscaling)**：将图片放大 8 倍，因为 ResNet 对太小的图片特征提取效果不佳。
*   **二值化与补边**：增加对比度和边缘留白，帮助 CRAFT 算法更好地定位文本框。

### 3.3 实际表现
*   **准确率**：**75%**。是目前未经专门微调的模型中表现最好的。
*   **角色**：作为"基准模型"（Benchmark），用于校验其他模型的效果，或者在没有人工复核的情况下提供最可靠的自动标注建议。

## 4. 优化建议
*   **使用 GPU**：如果在支持 CUDA 的机器上运行，速度会提升 10 倍以上。
*   **微调 (Fine-tuning)**：虽然 EasyOCR 支持微调，但训练成本较高，不如直接训练一个轻量级 Custom CNN 性价比高。
