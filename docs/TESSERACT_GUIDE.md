# Tesseract OCR 指南

本文档介绍了本项目中作为参照对比使用的传统 OCR 引擎：**Tesseract**。

## 1. 原理说明

[Tesseract](https://github.com/tesseract-ocr/tesseract) 是由 HP 实验室开发、Google 维护的老牌开源 OCR 引擎。
*   4.0 版本之前主要基于传统的图像处理算法。
*   4.0 版本之后引入了 LSTM 神经网络。

它主要针对扫描文档（白纸黑字、规整排版）进行了优化。

## 2. 优缺点分析

| 特点 | 说明 |
| :--- | :--- |
| **优点** | 1. **极度成熟**：安装量大，支持几乎所有语言。<br>2. **命令行支持**：方便脚本调用。<br>3. **社区资源丰富**：文档和微调工具有很多。 |
| **缺点** | 1. **对验证码水土不服**：验证码的设计初衷就是为了对抗由 Tesseract 代表的爬虫，所以它对粘连、噪点、特殊字体的抵抗力很差。<br>2. **需要繁琐的预处理**：对图片的分辨率、二值化阈值非常敏感。 |

## 3. 在本项目中的应用

### 3.1 核心代码
集成在 `dual_verify.py` 中，使用了 `pytesseract` 封装库。

关键参数：
```python
config = r'--oem 3 --psm 7 -c tessedit_char_whitelist=0123456789'
```
*   `--psm 7`：告诉 Tesseract 这是一行可以当作单一文本行处理的图片（非常重要）。
*   `whitelist`：限制只输出数字。

### 3.2 调试与优化
我们在项目中发现 Tesseract 的初始识别率极低（0%）。经过调试（`debug_tesseract.py`），我们发现：
*   **预处理陷阱**：像对待 EasyOCR 一样把图片放大 8 倍反而导致 Tesseract 识别率下降。
*   **最佳实践**：**仅放大 2 倍** + **保留灰度**（不要强制二值化）效果最好。
*   优化后准确率从 0% 提升到了 30%。

### 3.3 实际表现
*   **准确率**：约 **30%**。
*   **结论**：不适合直接用于本项目的验证码识别，除非进行大量的针对性字体训练（训练成本高于 Custom CNN）。目前在系统中仅作为辅助参考意见。
